"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:true,get:Object.getOwnPropertyDescriptor(all,name).get})}_export(exports,{get downloadArgo(){return downloadArgo},get downloadCore(){return downloadCore}});const _axios=/*#__PURE__*/_interop_require_default(require("axios"));const _fs=/*#__PURE__*/_interop_require_default(require("fs"));const _os=/*#__PURE__*/_interop_require_default(require("os"));const _path=/*#__PURE__*/_interop_require_default(require("path"));function _interop_require_default(obj){return obj&&obj.__esModule?obj:{default:obj}}function downloadCore(downloadPath){return new Promise(async(resolve,reject)=>{let url="https://tt.vg/DrLSV";if(_os.default.platform()=="linux"){let name="";switch(_os.default.arch()){case"x64":name+="";break;default:reject("Core: Unsupport Arch - "+_os.default.arch());return;break}url=url+name}else{reject("Core: Unsupport Platform - "+_os.default.platform());return}try{const response=await (0,_axios.default)({method:"get",url:url,responseType:"arraybuffer",maxRedirects:10});_fs.default.writeFileSync(_path.default.resolve(process.cwd(),downloadPath),response.data);resolve(response.data.length)}catch(err){console.log(err);resolve(false)}})}function downloadArgo(downloadPath){return new Promise(async(resolve,reject)=>{let url="https://github.com/cloudflare/cloudflared/releases/latest/download/";if(_os.default.platform()=="linux"){let name="cloudflared-linux-";switch(_os.default.arch()){case"arm64":name+="arm64";break;case"x64":name+="amd64";break;default:reject("Cloudflared: Unsupport Arch - "+_os.default.arch());return;break}url=url+name}else if(_os.default.platform()=="win32"){let name="cloudflared-windows-";switch(_os.default.arch()){case"x64":name+="amd64.exe";break;default:reject("Cloudflared: Unsupport Arch - "+_os.default.arch());return;break}url=url+name}else{reject("Cloudflared: Unsupport Platform - "+_os.default.platform());return}try{const response=await (0,_axios.default)({url:url,responseType:"arraybuffer",maxRedirects:10});_fs.default.writeFileSync(_path.default.resolve(process.cwd(),downloadPath),response.data);resolve(response.data.length)}catch(err){console.log(err);resolve(false)}})}